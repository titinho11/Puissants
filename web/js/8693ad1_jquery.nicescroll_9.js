(function(e){var c=!1,u=!1,v=5E3,y=2E3,r=0,x=function(){var e=document.getElementsByTagName('script'),e=e[e.length-1].src.split('?')[0];return 0<e.split('/').length?e.split('/').slice(0,-1).join('/')+'/':''}(),f=['ms','moz','webkit','o'],o=window.requestAnimationFrame||!1,t=window.cancelAnimationFrame||!1;if(!o)for(var w in f){var h=f[w];o||(o=window[h+'RequestAnimationFrame']);t||(t=window[h+'CancelAnimationFrame']||window[h+'CancelRequestAnimationFrame'])};var i=window.MutationObserver||window.WebKitMutationObserver||!1,m={zindex:'auto',cursoropacitymin:0,cursoropacitymax:1,cursorcolor:'#424242',cursorwidth:'5px',cursorborder:'1px solid #fff',cursorborderradius:'5px',scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:'',iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:'right',railvalign:'bottom',enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:0.3,rtlmode:!1,cursordragontouch:!1,oneaxismousemode:'auto'},d=!1,b=function(){if(d)return d;var r=document.createElement('DIV'),e={haspointerlock:'pointerLockElement'in document||'mozPointerLockElement'in document||'webkitPointerLockElement'in document};e.isopera='opera'in window;e.isopera12=e.isopera&&'getUserMedia'in navigator;e.isoperamini='[object OperaMini]'===Object.prototype.toString.call(window.operamini);e.isie='all'in document&&'attachEvent'in r&&!e.isopera;e.isieold=e.isie&&!('msInterpolationMode'in r.style);e.isie7=e.isie&&!e.isieold&&(!('documentMode'in document)||7==document.documentMode);e.isie8=e.isie&&'documentMode'in document&&8==document.documentMode;e.isie9=e.isie&&'performance'in window&&9<=document.documentMode;e.isie10=e.isie&&'performance'in window&&10<=document.documentMode;e.isie9mobile=/iemobile.9/i.test(navigator.userAgent);e.isie9mobile&&(e.isie9=!1);e.isie7mobile=!e.isie9mobile&&e.isie7&&/iemobile/i.test(navigator.userAgent);e.ismozilla='MozAppearance'in r.style;e.iswebkit='WebkitAppearance'in r.style;e.ischrome='chrome'in window;e.ischrome22=e.ischrome&&e.haspointerlock;e.ischrome26=e.ischrome&&'transition'in r.style;e.cantouch='ontouchstart'in document.documentElement||'ontouchstart'in window;e.hasmstouch=window.navigator.msPointerEnabled||!1;e.ismac=/^mac$/i.test(navigator.platform);e.isios=e.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform);e.isios4=e.isios&&!('seal'in Object);e.isandroid=/android/i.test(navigator.userAgent);e.trstyle=!1;e.hastransform=!1;e.hastranslate3d=!1;e.transitionstyle=!1;e.hastransition=!1;e.transitionend=!1;for(var t=['transform','msTransform','webkitTransform','MozTransform','OTransform'],o=0;o<t.length;o++)if('undefined'!=typeof r.style[t[o]]){e.trstyle=t[o];break};e.hastransform=!1!=e.trstyle;e.hastransform&&(r.style[e.trstyle]='translate3d(1px,2px,3px)',e.hastranslate3d=/translate3d/.test(r.style[e.trstyle]));e.transitionstyle=!1;e.prefixstyle='';e.transitionend=!1;for(var t='transition webkitTransition MozTransition OTransition OTransition msTransition KhtmlTransition'.split(' '),n=' -webkit- -moz- -o- -o -ms- -khtml-'.split(' '),s='transitionend webkitTransitionEnd transitionend otransitionend oTransitionEnd msTransitionEnd KhtmlTransitionEnd'.split(' '),o=0;o<t.length;o++)if(t[o]in r.style){e.transitionstyle=t[o];e.prefixstyle=n[o];e.transitionend=s[o];break};e.ischrome26&&(e.prefixstyle=n[1]);e.hastransition=e.transitionstyle;a:{t=['-moz-grab','-webkit-grab','grab'];if(e.ischrome&&!e.ischrome22||e.isie)t=[];for(o=0;o<t.length;o++)if(n=t[o],r.style.cursor=n,r.style.cursor==n){t=n;break a};t='url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize'};e.cursorgrabvalue=t;e.hasmousecapture='setCapture'in r;e.hasMutationObserver=!1!==i;return d=e},g=function(s,a){function z(){var e=n.win;if('zIndex'in e)return e.zIndex();for(;0<e.length&&9!=e[0].nodeType;){var o=e.css('zIndex');if(!isNaN(o)&&0!=o)return parseInt(o);e=e.parent()};return!1};function d(e,o,t){o=e.css(o);e=parseFloat(o);return isNaN(e)?(e=S[o]||0,t=3==e?t?n.win.outerHeight()-n.win.innerHeight():n.win.outerWidth()-n.win.innerWidth():1,n.isie8&&e&&(e+=1),t?e:0):e};function g(e,o,t,r){n._bind(e,o,function(r){r=r?r:window.event;var i={original:r,target:r.target||r.srcElement,type:'wheel',deltaMode:'MozMousePixelScroll'==r.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){r.preventDefault?r.preventDefault():r.returnValue=!1;return!1},stopImmediatePropagation:function(){r.stopImmediatePropagation?r.stopImmediatePropagation():r.cancelBubble=!0}};'mousewheel'==o?(i.deltaY=-0.025*r.wheelDelta,r.wheelDeltaX&&(i.deltaX=-0.025*r.wheelDeltaX)):i.deltaY=r.detail;return t.call(e,i)},r)};function w(e,o,t){var i,r;0==e.deltaMode?(i=-Math.floor(e.deltaX*(n.opt.mousescrollstep/54)),r=-Math.floor(e.deltaY*(n.opt.mousescrollstep/54))):1==e.deltaMode&&(i=-Math.floor(e.deltaX*n.opt.mousescrollstep),r=-Math.floor(e.deltaY*n.opt.mousescrollstep));o&&(n.opt.oneaxismousemode&&0==i&&r)&&(i=r,r=0);i&&(n.scrollmom&&n.scrollmom.stop(),n.lastdeltax+=i,n.debounced('mousewheelx',function(){var e=n.lastdeltax;n.lastdeltax=0;n.rail.drag||n.doScrollLeftBy(e)},120));if(r){if(n.opt.nativeparentscrolling&&t&&!n.ispage&&!n.zoomactive)if(0>r){if(n.getScrollTop()>=n.page.maxh)return!0}
else if(0>=n.getScrollTop())return!0;n.scrollmom&&n.scrollmom.stop();n.lastdeltay+=r;n.debounced('mousewheely',function(){var e=n.lastdeltay;n.lastdeltay=0;n.rail.drag||n.doScrollBy(e)},120)};e.stopImmediatePropagation();return e.preventDefault()};var n=this;this.version='3.5.0';this.name='nicescroll';this.me=a;this.opt={doc:e('body'),win:!1};e.extend(this.opt,m);this.opt.snapbackspeed=80;if(s)for(var h in n.opt)'undefined'!=typeof s[h]&&(n.opt[h]=s[h]);this.iddoc=(this.doc=n.opt.doc)&&this.doc[0]?this.doc[0].id||'':'';this.ispage=/BODY|HTML/.test(n.opt.win?n.opt.win[0].nodeName:this.doc[0].nodeName);this.haswrapper=!1!==n.opt.win;this.win=n.opt.win||(this.ispage?e(window):this.doc);this.docscroll=this.ispage&&!this.haswrapper?e(window):this.win;this.body=e('body');this.iframe=this.isfixed=this.viewport=!1;this.isiframe='IFRAME'==this.doc[0].nodeName&&'IFRAME'==this.win[0].nodeName;this.istextarea='TEXTAREA'==this.win[0].nodeName;this.forcescreen=!1;this.canshowonmouseevent='scroll'!=n.opt.autohidemode;this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1;this.scroll={x:0,y:0};this.scrollratio={x:0,y:0};this.cursorheight=20;this.scrollvaluemax=0;this.observerremover=this.observer=this.scrollmom=this.scrollrunning=this.checkrtlmode=!1;do this.id='ascrail'+y++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.selectiondrag=this.cursorfreezed=this.cursor=this.rail=!1;this.visibility=!0;this.hidden=this.locked=!1;this.cursoractive=!0;this.overflowx=n.opt.overflowx;this.overflowy=n.opt.overflowy;this.nativescrollingarea=!1;this.checkarea=0;this.events=[];this.saved={};this.delaylist={};this.synclist={};this.lastdeltay=this.lastdeltax=0;this.detected=b();var l=e.extend({},this.detected);this.ishwscroll=(this.canhwscroll=l.hastransform&&n.opt.hwacceleration)&&n.haswrapper;this.istouchcapable=!1;l.cantouch&&(l.ischrome&&!l.isios&&!l.isandroid)&&(this.istouchcapable=!0,l.cantouch=!1);l.cantouch&&(l.ismozilla&&!l.isios&&!l.isandroid)&&(this.istouchcapable=!0,l.cantouch=!1);n.opt.enablemouselockapi||(l.hasmousecapture=!1,l.haspointerlock=!1);this.delayed=function(e,o,t,i){var r=n.delaylist[e],s=(new Date).getTime();if(!i&&r&&r.tt)return!1;r&&r.tt&&clearTimeout(r.tt);if(r&&r.last+t>s&&!r.tt)n.delaylist[e]={last:s+t,tt:setTimeout(function(){n.delaylist[e].tt=0;o.call()},t)};else if(!r||!r.tt)n.delaylist[e]={last:s,tt:0},setTimeout(function(){o.call()},0)};this.debounced=function(e,o,t){var r=n.delaylist[e];(new Date).getTime();n.delaylist[e]=o;r||setTimeout(function(){var o=n.delaylist[e];n.delaylist[e]=!1;o.call()},t)};this.synched=function(e,t){n.synclist[e]=t;(function(){n.onsync||(o(function(){n.onsync=!1;for(e in n.synclist){var o=n.synclist[e];o&&o.call(n);n.synclist[e]=!1}}),n.onsync=!0)})();return e};this.unsynched=function(e){n.synclist[e]&&(n.synclist[e]=!1)};this.css=function(e,o){for(var t in o)n.saved.css.push([e,t,e.css(t)]),e.css(t,o[t])};this.scrollTop=function(e){return'undefined'==typeof e?n.getScrollTop():n.setScrollTop(e)};this.scrollLeft=function(e){return'undefined'==typeof e?n.getScrollLeft():n.setScrollLeft(e)};BezierClass=function(e,o,t,r,i,n,s){this.st=e;this.ed=o;this.spd=t;this.p1=r||0;this.p2=i||1;this.p3=n||0;this.p4=s||1;this.ts=(new Date).getTime();this.df=this.ed-this.st};BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-((new Date).getTime()-this.ts)/this.spd,o=this.B2(e)+this.B3(e)+this.B4(e);return 0>e?this.ed:this.st+Math.round(this.df*o)},update:function(e,o){this.st=this.getNow();this.ed=e;this.spd=o;this.ts=(new Date).getTime();this.df=this.ed-this.st;return this}};if(this.ishwscroll){this.doc.translate={x:0,y:0,tx:'0px',ty:'0px'};l.hastranslate3d&&l.isios&&this.doc.css('-webkit-backface-visibility','hidden');var f=function(){var e=n.doc.css(l.trstyle);return e&&'matrix'==e.substr(0,6)?e.replace(/^.*\((.*)\)$/g,'$1').replace(/px/g,'').split(/, +/):!1};this.getScrollTop=function(e){if(!e){if(e=f())return 16==e.length?-e[13]:-e[5];if(n.timerscroll&&n.timerscroll.bz)return n.timerscroll.bz.getNow()};return n.doc.translate.y};this.getScrollLeft=function(e){if(!e){if(e=f())return 16==e.length?-e[12]:-e[4];if(n.timerscroll&&n.timerscroll.bh)return n.timerscroll.bh.getNow()};return n.doc.translate.x};this.notifyScrollEvent=document.createEvent?function(e){var o=document.createEvent('UIEvents');o.initUIEvent('scroll',!1,!0,window,1);e.dispatchEvent(o)}:document.fireEvent?function(e){var o=document.createEventObject();e.fireEvent('onscroll');o.cancelBubble=!0}:function(e,o){};l.hastranslate3d&&n.opt.enabletranslate3d?(this.setScrollTop=function(e,o){n.doc.translate.y=e;n.doc.translate.ty=-1*e+'px';n.doc.css(l.trstyle,'translate3d('+n.doc.translate.tx+','+n.doc.translate.ty+',0px)');o||n.notifyScrollEvent(n.win[0])},this.setScrollLeft=function(e,o){n.doc.translate.x=e;n.doc.translate.tx=-1*e+'px';n.doc.css(l.trstyle,'translate3d('+n.doc.translate.tx+','+n.doc.translate.ty+',0px)');o||n.notifyScrollEvent(n.win[0])}):(this.setScrollTop=function(e,o){n.doc.translate.y=e;n.doc.translate.ty=-1*e+'px';n.doc.css(l.trstyle,'translate('+n.doc.translate.tx+','+n.doc.translate.ty+')');o||n.notifyScrollEvent(n.win[0])},this.setScrollLeft=function(e,o){n.doc.translate.x=e;n.doc.translate.tx=-1*e+'px';n.doc.css(l.trstyle,'translate('+n.doc.translate.tx+','+n.doc.translate.ty+')');o||n.notifyScrollEvent(n.win[0])})}
else this.getScrollTop=function(){return n.docscroll.scrollTop()},this.setScrollTop=function(e){return n.docscroll.scrollTop(e)},this.getScrollLeft=function(){return n.docscroll.scrollLeft()},this.setScrollLeft=function(e){return n.docscroll.scrollLeft(e)};this.getTarget=function(e){return!e?!1:e.target?e.target:e.srcElement?e.srcElement:!1};this.hasParent=function(e,o){if(!e)return!1;for(var t=e.target||e.srcElement||e||!1;t&&t.id!=o;)t=t.parentNode||!1;return!1!==t};var S={thin:1,medium:3,thick:5};this.getOffset=function(){if(n.isfixed)return{top:parseFloat(n.win.css('top')),left:parseFloat(n.win.css('left'))};if(!n.viewport)return n.win.offset();var e=n.win.offset(),o=n.viewport.offset();return{top:e.top-o.top+n.viewport.scrollTop(),left:e.left-o.left+n.viewport.scrollLeft()}};this.updateScrollBar=function(e){if(n.ishwscroll)n.rail.css({height:n.win.innerHeight()}),n.railh&&n.railh.css({width:n.win.innerWidth()});else{var i=n.getOffset(),t=i.top,o=i.left,t=t+d(n.win,'border-top-width',!0);n.win.outerWidth();n.win.innerWidth();var o=o+(n.rail.align?n.win.outerWidth()-d(n.win,'border-right-width')-n.rail.width:d(n.win,'border-left-width')),r=n.opt.railoffset;r&&(r.top&&(t+=r.top),n.rail.align&&r.left&&(o+=r.left));n.locked||n.rail.css({top:t,left:o,height:e?e.h:n.win.innerHeight()});n.zoom&&n.zoom.css({top:t+1,left:1==n.rail.align?o-20:o+n.rail.width+4});n.railh&&!n.locked&&(t=i.top,o=i.left,e=n.railh.align?t+d(n.win,'border-top-width',!0)+n.win.innerHeight()-n.railh.height:t+d(n.win,'border-top-width',!0),o+=d(n.win,'border-left-width'),n.railh.css({top:e,left:o,width:n.railh.width}))}};this.doRailClick=function(e,o,t){var r;n.locked||(n.cancelEvent(e),o?(o=t?n.doScrollLeft:n.doScrollTop,r=t?(e.pageX-n.railh.offset().left-n.cursorwidth/2)*n.scrollratio.x:(e.pageY-n.rail.offset().top-n.cursorheight/2)*n.scrollratio.y,o(r)):(o=t?n.doScrollLeftBy:n.doScrollBy,r=t?n.scroll.x:n.scroll.y,e=t?e.pageX-n.railh.offset().left:e.pageY-n.rail.offset().top,t=t?n.view.w:n.view.h,r>=e?o(t):o(-t)))};n.hasanimationframe=o;n.hascancelanimationframe=t;n.hasanimationframe?n.hascancelanimationframe||(t=function(){n.cancelAnimationFrame=!0}):(o=function(e){return setTimeout(e,15-Math.floor(+new Date/1E3)%16)},t=clearInterval);this.init=function(){n.saved.css=[];if(l.isie7mobile||l.isoperamini)return!0;l.hasmstouch&&n.css(n.ispage?e('html'):n.win,{'-ms-touch-action':'none'});n.zindex='auto';n.zindex=!n.ispage&&'auto'==n.opt.zindex?z()||'auto':n.opt.zindex;!n.ispage&&'auto'!=n.zindex&&n.zindex>r&&(r=n.zindex);n.isie&&(0==n.zindex&&'auto'==n.opt.zindex)&&(n.zindex='auto');if(!n.ispage||!l.cantouch&&!l.isieold&&!l.isie9mobile){var a=n.docscroll;n.ispage&&(a=n.haswrapper?n.win:n.doc);l.isie9mobile||n.css(a,{'overflow-y':'hidden'});n.ispage&&l.isie7&&('BODY'==n.doc[0].nodeName?n.css(e('html'),{'overflow-y':'hidden'}):'HTML'==n.doc[0].nodeName&&n.css(e('body'),{'overflow-y':'hidden'}));l.isios&&(!n.ispage&&!n.haswrapper)&&n.css(e('body'),{'-webkit-overflow-scrolling':'touch'});var s=e(document.createElement('div'));s.css({position:'relative',top:0,'float':'right',width:n.opt.cursorwidth,height:'0px','background-color':n.opt.cursorcolor,border:n.opt.cursorborder,'background-clip':'padding-box','-webkit-border-radius':n.opt.cursorborderradius,'-moz-border-radius':n.opt.cursorborderradius,'border-radius':n.opt.cursorborderradius});s.hborder=parseFloat(s.outerHeight()-s.innerHeight());n.cursor=s;var o=e(document.createElement('div'));o.attr('id',n.id);o.addClass('nicescroll-rails');var f,d,g=['left','right'],w;for(w in g)d=g[w],(f=n.opt.railpadding[d])?o.css('padding-'+d,f+'px'):n.opt.railpadding[d]=0;o.append(s);o.width=Math.max(parseFloat(n.opt.cursorwidth),s.outerWidth())+n.opt.railpadding.left+n.opt.railpadding.right;o.css({width:o.width+'px',zIndex:n.zindex,background:n.opt.background,cursor:'default'});o.visibility=!0;o.scrollable=!0;o.align='left'==n.opt.railalign?0:1;n.rail=o;s=n.rail.drag=!1;n.opt.boxzoom&&(!n.ispage&&!l.isieold)&&(s=document.createElement('div'),n.bind(s,'click',n.doZoom),n.zoom=e(s),n.zoom.css({cursor:'pointer','z-index':n.zindex,backgroundImage:'url('+x+'zoomico.png)',height:18,width:18,backgroundPosition:'0px 0px'}),n.opt.dblclickzoom&&n.bind(n.win,'dblclick',n.doZoom),l.cantouch&&n.opt.gesturezoom&&(n.ongesturezoom=function(e){1.5<e.scale&&n.doZoomIn(e);0.8>e.scale&&n.doZoomOut(e);return n.cancelEvent(e)},n.bind(n.win,'gestureend',n.ongesturezoom)));n.railh=!1;if(n.opt.horizrailenabled){n.css(a,{'overflow-x':'hidden'});s=e(document.createElement('div'));s.css({position:'relative',top:0,height:n.opt.cursorwidth,width:'0px','background-color':n.opt.cursorcolor,border:n.opt.cursorborder,'background-clip':'padding-box','-webkit-border-radius':n.opt.cursorborderradius,'-moz-border-radius':n.opt.cursorborderradius,'border-radius':n.opt.cursorborderradius});s.wborder=parseFloat(s.outerWidth()-s.innerWidth());n.cursorh=s;var t=e(document.createElement('div'));t.attr('id',n.id+'-hr');t.addClass('nicescroll-rails');t.height=Math.max(parseFloat(n.opt.cursorwidth),s.outerHeight());t.css({height:t.height+'px',zIndex:n.zindex,background:n.opt.background});t.append(s);t.visibility=!0;t.scrollable=!0;t.align='top'==n.opt.railvalign?0:1;n.railh=t;n.railh.drag=!1};n.ispage?(o.css({position:'fixed',top:'0px',height:'100%'}),o.align?o.css({right:'0px'}):o.css({left:'0px'}),n.body.append(o),n.railh&&(t.css({position:'fixed',left:'0px',width:'100%'}),t.align?t.css({bottom:'0px'}):t.css({top:'0px'}),n.body.append(t))):(n.ishwscroll?('static'==n.win.css('position')&&n.css(n.win,{position:'relative'}),a='HTML'==n.win[0].nodeName?n.body:n.win,n.zoom&&(n.zoom.css({position:'absolute',top:1,right:0,'margin-right':o.width+4}),a.append(n.zoom)),o.css({position:'absolute',top:0}),o.align?o.css({right:0}):o.css({left:0}),a.append(o),t&&(t.css({position:'absolute',left:0,bottom:0}),t.align?t.css({bottom:0}):t.css({top:0}),a.append(t))):(n.isfixed='fixed'==n.win.css('position'),a=n.isfixed?'fixed':'absolute',n.isfixed||(n.viewport=n.getViewport(n.win[0])),n.viewport&&(n.body=n.viewport,!1==/fixed|relative|absolute/.test(n.viewport.css('position'))&&n.css(n.viewport,{position:'relative'})),o.css({position:a}),n.zoom&&n.zoom.css({position:a}),n.updateScrollBar(),n.body.append(o),n.zoom&&n.body.append(n.zoom),n.railh&&(t.css({position:a}),n.body.append(t))),l.isios&&n.css(n.win,{'-webkit-tap-highlight-color':'rgba(0,0,0,0)','-webkit-touch-callout':'none'}),l.isie&&n.opt.disableoutline&&n.win.attr('hideFocus','true'),l.iswebkit&&n.opt.disableoutline&&n.win.css({outline:'none'}));!1===n.opt.autohidemode?(n.autohidedom=!1,n.rail.css({opacity:n.opt.cursoropacitymax}),n.railh&&n.railh.css({opacity:n.opt.cursoropacitymax})):!0===n.opt.autohidemode||'leave'===n.opt.autohidemode?(n.autohidedom=e().add(n.rail),l.isie8&&(n.autohidedom=n.autohidedom.add(n.cursor)),n.railh&&(n.autohidedom=n.autohidedom.add(n.railh)),n.railh&&l.isie8&&(n.autohidedom=n.autohidedom.add(n.cursorh))):'scroll'==n.opt.autohidemode?(n.autohidedom=e().add(n.rail),n.railh&&(n.autohidedom=n.autohidedom.add(n.railh))):'cursor'==n.opt.autohidemode?(n.autohidedom=e().add(n.cursor),n.railh&&(n.autohidedom=n.autohidedom.add(n.cursorh))):'hidden'==n.opt.autohidemode&&(n.autohidedom=!1,n.hide(),n.locked=!1);if(l.isie9mobile)n.scrollmom=new p(n),n.onmangotouch=function(e){e=n.getScrollTop();var o=n.getScrollLeft();if(e==n.scrollmom.lastscrolly&&o==n.scrollmom.lastscrollx)return!0;var t=e-n.mangotouch.sy,i=o-n.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(i,2)+Math.pow(t,2)))){var s=0>t?-1:1,l=0>i?-1:1,r=+new Date;n.mangotouch.lazy&&clearTimeout(n.mangotouch.lazy);80<r-n.mangotouch.tm||n.mangotouch.dry!=s||n.mangotouch.drx!=l?(n.scrollmom.stop(),n.scrollmom.reset(o,e),n.mangotouch.sy=e,n.mangotouch.ly=e,n.mangotouch.sx=o,n.mangotouch.lx=o,n.mangotouch.dry=s,n.mangotouch.drx=l,n.mangotouch.tm=r):(n.scrollmom.stop(),n.scrollmom.update(n.mangotouch.sx-i,n.mangotouch.sy-t),n.mangotouch.tm=r,t=Math.max(Math.abs(n.mangotouch.ly-e),Math.abs(n.mangotouch.lx-o)),n.mangotouch.ly=e,n.mangotouch.lx=o,2<t&&(n.mangotouch.lazy=setTimeout(function(){n.mangotouch.lazy=!1;n.mangotouch.dry=0;n.mangotouch.drx=0;n.mangotouch.tm=0;n.scrollmom.doMomentum(30)},100)))}},o=n.getScrollTop(),t=n.getScrollLeft(),n.mangotouch={sy:o,ly:o,dry:0,sx:t,lx:t,drx:0,lazy:!1,tm:0},n.bind(n.docscroll,'scroll',n.onmangotouch);else{if(l.cantouch||n.istouchcapable||n.opt.touchbehavior||l.hasmstouch){n.scrollmom=new p(n);n.ontouchstart=function(o){if(o.pointerType&&2!=o.pointerType)return!1;if(!n.locked){if(l.hasmstouch)for(var t=o.target?o.target:!1;t;){var r=e(t).getNiceScroll();if(0<r.length&&r[0].me==n.me)break;if(0<r.length)return!1;if('DIV'==t.nodeName&&t.id==n.id)break;t=t.parentNode?t.parentNode:!1};n.cancelScroll();if((t=n.getTarget(o))&&/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return n.stopPropagation(o);!('clientX'in o)&&'changedTouches'in o&&(o.clientX=o.changedTouches[0].clientX,o.clientY=o.changedTouches[0].clientY);n.forcescreen&&(r=o,o={original:o.original?o.original:o},o.clientX=r.screenX,o.clientY=r.screenY);n.rail.drag={x:o.clientX,y:o.clientY,sx:n.scroll.x,sy:n.scroll.y,st:n.getScrollTop(),sl:n.getScrollLeft(),pt:2,dl:!1};if(n.ispage||!n.opt.directionlockdeadzone)n.rail.drag.dl='f';else{var r=e(window).width(),i=e(window).height(),s=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),a=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),i=Math.max(0,a-i),r=Math.max(0,s-r);n.rail.drag.ck=!n.rail.scrollable&&n.railh.scrollable?0<i?'v':!1:n.rail.scrollable&&!n.railh.scrollable?0<r?'h':!1:!1;n.rail.drag.ck||(n.rail.drag.dl='f')};n.opt.touchbehavior&&(n.isiframe&&l.isie)&&(r=n.win.position(),n.rail.drag.x+=r.left,n.rail.drag.y+=r.top);n.hasmoving=!1;n.lastmouseup=!1;n.scrollmom.reset(o.clientX,o.clientY);if(!l.cantouch&&!this.istouchcapable&&!l.hasmstouch){if(!t||!/INPUT|SELECT|TEXTAREA/i.test(t.nodeName))return!n.ispage&&l.hasmousecapture&&t.setCapture(),n.opt.touchbehavior?n.cancelEvent(o):n.stopPropagation(o);/SUBMIT|CANCEL|BUTTON/i.test(e(t).attr('type'))&&(pc={tg:t,click:!1},n.preventclick=pc)}}};n.ontouchend=function(e){if(e.pointerType&&2!=e.pointerType)return!1;if(n.rail.drag&&2==n.rail.drag.pt&&(n.scrollmom.doMomentum(),n.rail.drag=!1,n.hasmoving&&(n.hasmoving=!1,n.lastmouseup=!0,n.hideCursor(),l.hasmousecapture&&document.releaseCapture(),!l.cantouch)))return n.cancelEvent(e)};var b=n.opt.touchbehavior&&n.isiframe&&!l.hasmousecapture;n.ontouchmove=function(o,t){if(o.pointerType&&2!=o.pointerType)return!1;if(n.rail.drag&&2==n.rail.drag.pt){if(l.cantouch&&'undefined'==typeof o.original)return!0;n.hasmoving=!0;n.preventclick&&!n.preventclick.click&&(n.preventclick.click=n.preventclick.tg.onclick||!1,n.preventclick.tg.onclick=n.onpreventclick);o=e.extend({original:o},o);'changedTouches'in o&&(o.clientX=o.changedTouches[0].clientX,o.clientY=o.changedTouches[0].clientY);if(n.forcescreen){var a=o;o={original:o.original?o.original:o};o.clientX=a.screenX;o.clientY=a.screenY};a=ofy=0;if(b&&!t){var s=n.win.position(),a=-s.left;ofy=-s.top};var u=o.clientY+ofy,s=u-n.rail.drag.y,h=o.clientX+a,c=h-n.rail.drag.x,r=n.rail.drag.st-s;n.ishwscroll&&n.opt.bouncescroll?0>r?r=Math.round(r/2):r>n.page.maxh&&(r=n.page.maxh+Math.round((r-n.page.maxh)/2)):(0>r&&(u=r=0),r>n.page.maxh&&(r=n.page.maxh,u=0));if(n.railh&&n.railh.scrollable){var i=n.rail.drag.sl-c;n.ishwscroll&&n.opt.bouncescroll?0>i?i=Math.round(i/2):i>n.page.maxw&&(i=n.page.maxw+Math.round((i-n.page.maxw)/2)):(0>i&&(h=i=0),i>n.page.maxw&&(i=n.page.maxw,h=0))};a=!1;if(n.rail.drag.dl)a=!0,'v'==n.rail.drag.dl?i=n.rail.drag.sl:'h'==n.rail.drag.dl&&(r=n.rail.drag.st);else{var s=Math.abs(s),c=Math.abs(c),d=n.opt.directionlockdeadzone;if('v'==n.rail.drag.ck){if(s>d&&c<=0.3*s)return n.rail.drag=!1,!0;c>d&&(n.rail.drag.dl='f',e('body').scrollTop(e('body').scrollTop()))}
else if('h'==n.rail.drag.ck){if(c>d&&s<=0.3*c)return n.rail.drag=!1,!0;s>d&&(n.rail.drag.dl='f',e('body').scrollLeft(e('body').scrollLeft()))}};n.synched('touchmove',function(){n.rail.drag&&2==n.rail.drag.pt&&(n.prepareTransition&&n.prepareTransition(0),n.rail.scrollable&&n.setScrollTop(r),n.scrollmom.update(h,u),n.railh&&n.railh.scrollable?(n.setScrollLeft(i),n.showCursor(r,i)):n.showCursor(r),l.isie10&&document.selection.clear())});l.ischrome&&n.istouchcapable&&(a=!1);if(a)return n.cancelEvent(o)}}};n.onmousedown=function(e,o){if(!(n.rail.drag&&1!=n.rail.drag.pt)){if(n.locked)return n.cancelEvent(e);n.cancelScroll();n.rail.drag={x:e.clientX,y:e.clientY,sx:n.scroll.x,sy:n.scroll.y,pt:1,hr:!!o};var t=n.getTarget(e);!n.ispage&&l.hasmousecapture&&t.setCapture();n.isiframe&&!l.hasmousecapture&&(n.saved.csspointerevents=n.doc.css('pointer-events'),n.css(n.doc,{'pointer-events':'none'}));return n.cancelEvent(e)}};n.onmouseup=function(e){if(n.rail.drag&&(l.hasmousecapture&&document.releaseCapture(),n.isiframe&&!l.hasmousecapture&&n.doc.css('pointer-events',n.saved.csspointerevents),1==n.rail.drag.pt))return n.rail.drag=!1,n.cancelEvent(e)};n.onmousemove=function(e){if(n.rail.drag&&1==n.rail.drag.pt){if(l.ischrome&&0==e.which)return n.onmouseup(e);n.cursorfreezed=!0;if(n.rail.drag.hr){n.scroll.x=n.rail.drag.sx+(e.clientX-n.rail.drag.x);0>n.scroll.x&&(n.scroll.x=0);var o=n.scrollvaluemaxw;n.scroll.x>o&&(n.scroll.x=o)}
else n.scroll.y=n.rail.drag.sy+(e.clientY-n.rail.drag.y),0>n.scroll.y&&(n.scroll.y=0),o=n.scrollvaluemax,n.scroll.y>o&&(n.scroll.y=o);n.synched('mousemove',function(){n.rail.drag&&1==n.rail.drag.pt&&(n.showCursor(),n.rail.drag.hr?n.doScrollLeft(Math.round(n.scroll.x*n.scrollratio.x),n.opt.cursordragspeed):n.doScrollTop(Math.round(n.scroll.y*n.scrollratio.y),n.opt.cursordragspeed))});return n.cancelEvent(e)}};if(l.cantouch||n.opt.touchbehavior)n.onpreventclick=function(e){if(n.preventclick)return n.preventclick.tg.onclick=n.preventclick.click,n.preventclick=!1,n.cancelEvent(e)},n.bind(n.win,'mousedown',n.ontouchstart),n.onclick=l.isios?!1:function(e){return n.lastmouseup?(n.lastmouseup=!1,n.cancelEvent(e)):!0},n.opt.grabcursorenabled&&l.cursorgrabvalue&&(n.css(n.ispage?n.doc:n.win,{cursor:l.cursorgrabvalue}),n.css(n.rail,{cursor:l.cursorgrabvalue}));else{var m=function(e){if(n.selectiondrag){if(e){var o=n.win.outerHeight();e=e.pageY-n.selectiondrag.top;0<e&&e<o&&(e=0);e>=o&&(e-=o);n.selectiondrag.df=e};0!=n.selectiondrag.df&&(n.doScrollBy(2*-Math.floor(n.selectiondrag.df/6)),n.debounced('doselectionscroll',function(){m()},50))}};n.hasTextSelected='getSelection'in document?function(){return 0<document.getSelection().rangeCount}:'selection'in document?function(){return'None'!=document.selection.type}:function(){return!1};n.onselectionstart=function(e){n.ispage||(n.selectiondrag=n.win.offset())};n.onselectionend=function(e){n.selectiondrag=!1};n.onselectiondrag=function(e){n.selectiondrag&&n.hasTextSelected()&&n.debounced('selectionscroll',function(){m(e)},250)}};l.hasmstouch&&(n.css(n.rail,{'-ms-touch-action':'none'}),n.css(n.cursor,{'-ms-touch-action':'none'}),n.bind(n.win,'MSPointerDown',n.ontouchstart),n.bind(document,'MSPointerUp',n.ontouchend),n.bind(document,'MSPointerMove',n.ontouchmove),n.bind(n.cursor,'MSGestureHold',function(e){e.preventDefault()}),n.bind(n.cursor,'contextmenu',function(e){e.preventDefault()}));this.istouchcapable&&(n.bind(n.win,'touchstart',n.ontouchstart),n.bind(document,'touchend',n.ontouchend),n.bind(document,'touchcancel',n.ontouchend),n.bind(document,'touchmove',n.ontouchmove));n.bind(n.cursor,'mousedown',n.onmousedown);n.bind(n.cursor,'mouseup',n.onmouseup);n.railh&&(n.bind(n.cursorh,'mousedown',function(e){n.onmousedown(e,!0)}),n.bind(n.cursorh,'mouseup',function(e){if(!(n.rail.drag&&2==n.rail.drag.pt))return n.rail.drag=!1,n.hasmoving=!1,n.hideCursor(),l.hasmousecapture&&document.releaseCapture(),n.cancelEvent(e)}));if(n.opt.cursordragontouch||!l.cantouch&&!n.opt.touchbehavior)n.rail.css({cursor:'default'}),n.railh&&n.railh.css({cursor:'default'}),n.jqbind(n.rail,'mouseenter',function(){n.canshowonmouseevent&&n.showCursor();n.rail.active=!0}),n.jqbind(n.rail,'mouseleave',function(){n.rail.active=!1;n.rail.drag||n.hideCursor()}),n.opt.sensitiverail&&(n.bind(n.rail,'click',function(e){n.doRailClick(e,!1,!1)}),n.bind(n.rail,'dblclick',function(e){n.doRailClick(e,!0,!1)}),n.bind(n.cursor,'click',function(e){n.cancelEvent(e)}),n.bind(n.cursor,'dblclick',function(e){n.cancelEvent(e)})),n.railh&&(n.jqbind(n.railh,'mouseenter',function(){n.canshowonmouseevent&&n.showCursor();n.rail.active=!0}),n.jqbind(n.railh,'mouseleave',function(){n.rail.active=!1;n.rail.drag||n.hideCursor()}),n.opt.sensitiverail&&(n.bind(n.railh,'click',function(e){n.doRailClick(e,!1,!0)}),n.bind(n.railh,'dblclick',function(e){n.doRailClick(e,!0,!0)}),n.bind(n.cursorh,'click',function(e){n.cancelEvent(e)}),n.bind(n.cursorh,'dblclick',function(e){n.cancelEvent(e)})));!l.cantouch&&!n.opt.touchbehavior?(n.bind(l.hasmousecapture?n.win:document,'mouseup',n.onmouseup),n.bind(document,'mousemove',n.onmousemove),n.onclick&&n.bind(document,'click',n.onclick),!n.ispage&&n.opt.enablescrollonselection&&(n.bind(n.win[0],'mousedown',n.onselectionstart),n.bind(document,'mouseup',n.onselectionend),n.bind(n.cursor,'mouseup',n.onselectionend),n.cursorh&&n.bind(n.cursorh,'mouseup',n.onselectionend),n.bind(document,'mousemove',n.onselectiondrag)),n.zoom&&(n.jqbind(n.zoom,'mouseenter',function(){n.canshowonmouseevent&&n.showCursor();n.rail.active=!0}),n.jqbind(n.zoom,'mouseleave',function(){n.rail.active=!1;n.rail.drag||n.hideCursor()}))):(n.bind(l.hasmousecapture?n.win:document,'mouseup',n.ontouchend),n.bind(document,'mousemove',n.ontouchmove),n.onclick&&n.bind(document,'click',n.onclick),n.opt.cursordragontouch&&(n.bind(n.cursor,'mousedown',n.onmousedown),n.bind(n.cursor,'mousemove',n.onmousemove),n.cursorh&&n.bind(n.cursorh,'mousedown',function(e){n.onmousedown(e,!0)}),n.cursorh&&n.bind(n.cursorh,'mousemove',n.onmousemove)));n.opt.enablemousewheel&&(n.isiframe||n.bind(l.isie&&n.ispage?document:n.win,'mousewheel',n.onmousewheel),n.bind(n.rail,'mousewheel',n.onmousewheel),n.railh&&n.bind(n.railh,'mousewheel',n.onmousewheelhr));!n.ispage&&(!l.cantouch&&!/HTML|BODY/.test(n.win[0].nodeName))&&(n.win.attr('tabindex')||n.win.attr({tabindex:v++}),n.jqbind(n.win,'focus',function(e){c=n.getTarget(e).id||!0;n.hasfocus=!0;n.canshowonmouseevent&&n.noticeCursor()}),n.jqbind(n.win,'blur',function(e){c=!1;n.hasfocus=!1}),n.jqbind(n.win,'mouseenter',function(e){u=n.getTarget(e).id||!0;n.hasmousefocus=!0;n.canshowonmouseevent&&n.noticeCursor()}),n.jqbind(n.win,'mouseleave',function(){u=!1;n.hasmousefocus=!1;n.rail.drag||n.hideCursor()}))};n.onkeypress=function(e){if(n.locked&&0==n.page.maxh)return!0;e=e?e:window.e;var t=n.getTarget(e);if(t&&/INPUT|TEXTAREA|SELECT|OPTION/.test(t.nodeName)&&(!t.getAttribute('type')&&!t.type||!/submit|button|cancel/i.tp))return!0;if(n.hasfocus||n.hasmousefocus&&!c||n.ispage&&!c&&!u){t=e.keyCode;if(n.locked&&27!=t)return n.cancelEvent(e);var r=e.ctrlKey||!1,i=e.shiftKey||!1,o=!1;switch(t){case 38:case 63233:n.doScrollBy(72);o=!0;break;case 40:case 63235:n.doScrollBy(-72);o=!0;break;case 37:case 63232:n.railh&&(r?n.doScrollLeft(0):n.doScrollLeftBy(72),o=!0);break;case 39:case 63234:n.railh&&(r?n.doScrollLeft(n.page.maxw):n.doScrollLeftBy(-72),o=!0);break;case 33:case 63276:n.doScrollBy(n.view.h);o=!0;break;case 34:case 63277:n.doScrollBy(-n.view.h);o=!0;break;case 36:case 63273:n.railh&&r?n.doScrollPos(0,0):n.doScrollTo(0);o=!0;break;case 35:case 63275:n.railh&&r?n.doScrollPos(n.page.maxw,n.page.maxh):n.doScrollTo(n.page.maxh);o=!0;break;case 32:n.opt.spacebarenabled&&(i?n.doScrollBy(n.view.h):n.doScrollBy(-n.view.h),o=!0);break;case 27:n.zoomactive&&(n.doZoom(),o=!0)};if(o)return n.cancelEvent(e)}};n.opt.enablekeyboard&&n.bind(document,l.isopera&&!l.isopera12?'keypress':'keydown',n.onkeypress);n.bind(window,'resize',n.lazyResize);n.bind(window,'orientationchange',n.lazyResize);n.bind(window,'load',n.lazyResize);if(l.ischrome&&!n.ispage&&!n.haswrapper){var y=n.win.attr('style'),o=parseFloat(n.win.css('width'))+1;n.win.css('width',o);n.synched('chromefix',function(){n.win.attr('style',y)})};n.onAttributeChange=function(e){n.lazyResize(250)};!n.ispage&&!n.haswrapper&&(!1!==i?(n.observer=new i(function(e){e.forEach(n.onAttributeChange)}),n.observer.observe(n.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),n.observerremover=new i(function(e){e.forEach(function(e){if(0<e.removedNodes.length)for(var o in e.removedNodes)if(e.removedNodes[o]==n.win[0])return n.remove()})}),n.observerremover.observe(n.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(n.bind(n.win,l.isie&&!l.isie9?'propertychange':'DOMAttrModified',n.onAttributeChange),l.isie9&&n.win[0].attachEvent('onpropertychange',n.onAttributeChange),n.bind(n.win,'DOMNodeRemoved',function(e){e.target==n.win[0]&&n.remove()})));!n.ispage&&n.opt.boxzoom&&n.bind(window,'resize',n.resizeZoom);n.istextarea&&n.bind(n.win,'mouseup',n.lazyResize);n.checkrtlmode=!0;n.lazyResize(30)};if('IFRAME'==this.doc[0].nodeName){var h=function(o){n.iframexd=!1;try{var t='contentDocument'in this?this.contentDocument:this.contentWindow.document}catch(r){n.iframexd=!0,t=!1};if(n.iframexd)return'console'in window&&console.log('NiceScroll error: policy restriced iframe'),!0;n.forcescreen=!0;n.isiframe&&(n.iframe={doc:e(t),html:n.doc.contents().find('html')[0],body:n.doc.contents().find('body')[0]},n.getContentSize=function(){return{w:Math.max(n.iframe.html.scrollWidth,n.iframe.body.scrollWidth),h:Math.max(n.iframe.html.scrollHeight,n.iframe.body.scrollHeight)}},n.docscroll=e(n.iframe.body));!l.isios&&(n.opt.iframeautoresize&&!n.isiframe)&&(n.win.scrollTop(0),n.doc.height(''),o=Math.max(t.getElementsByTagName('html')[0].scrollHeight,t.body.scrollHeight),n.doc.height(o));n.lazyResize(30);l.isie7&&n.css(e(n.iframe.html),{'overflow-y':'hidden'});n.css(e(n.iframe.body),{'overflow-y':'hidden'});l.isios&&n.haswrapper&&n.css(e(t.body),{'-webkit-transform':'translate3d(0,0,0)'});'contentWindow'in this?n.bind(this.contentWindow,'scroll',n.onscroll):n.bind(t,'scroll',n.onscroll);n.opt.enablemousewheel&&n.bind(t,'mousewheel',n.onmousewheel);n.opt.enablekeyboard&&n.bind(t,l.isopera?'keypress':'keydown',n.onkeypress);if(l.cantouch||n.opt.touchbehavior)n.bind(t,'mousedown',n.ontouchstart),n.bind(t,'mousemove',function(e){n.ontouchmove(e,!0)}),n.opt.grabcursorenabled&&l.cursorgrabvalue&&n.css(e(t.body),{cursor:l.cursorgrabvalue});n.bind(t,'mouseup',n.ontouchend);n.zoom&&(n.opt.dblclickzoom&&n.bind(t,'dblclick',n.doZoom),n.ongesturezoom&&n.bind(t,'gestureend',n.ongesturezoom))};this.doc[0].readyState&&'complete'==this.doc[0].readyState&&setTimeout(function(){h.call(n.doc[0],!1)},500);n.bind(this.doc,'load',h)}};this.showCursor=function(e,o){n.cursortimeout&&(clearTimeout(n.cursortimeout),n.cursortimeout=0);if(n.rail){n.autohidedom&&(n.autohidedom.stop().css({opacity:n.opt.cursoropacitymax}),n.cursoractive=!0);if(!n.rail.drag||1!=n.rail.drag.pt)'undefined'!=typeof e&&!1!==e&&(n.scroll.y=Math.round(1*e/n.scrollratio.y)),'undefined'!=typeof o&&(n.scroll.x=Math.round(1*o/n.scrollratio.x));n.cursor.css({height:n.cursorheight,top:n.scroll.y});n.cursorh&&(!n.rail.align&&n.rail.visibility?n.cursorh.css({width:n.cursorwidth,left:n.scroll.x+n.rail.width}):n.cursorh.css({width:n.cursorwidth,left:n.scroll.x}),n.cursoractive=!0);n.zoom&&n.zoom.stop().css({opacity:n.opt.cursoropacitymax})}};this.hideCursor=function(e){!n.cursortimeout&&(n.rail&&n.autohidedom&&!(n.hasmousefocus&&'leave'==n.opt.autohidemode))&&(n.cursortimeout=setTimeout(function(){if(!n.rail.active||!n.showonmouseevent)n.autohidedom.stop().animate({opacity:n.opt.cursoropacitymin}),n.zoom&&n.zoom.stop().animate({opacity:n.opt.cursoropacitymin}),n.cursoractive=!1;n.cursortimeout=0},e||n.opt.hidecursordelay))};this.noticeCursor=function(e,o,t){n.showCursor(o,t);n.rail.active||n.hideCursor(e)};this.getContentSize=n.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:n.haswrapper?function(){return{w:n.doc.outerWidth()+parseInt(n.win.css('paddingLeft'))+parseInt(n.win.css('paddingRight')),h:n.doc.outerHeight()+parseInt(n.win.css('paddingTop'))+parseInt(n.win.css('paddingBottom'))}}:function(){return{w:n.docscroll[0].scrollWidth,h:n.docscroll[0].scrollHeight}};this.onResize=function(e,o){if(!n.win)return!1;if(!n.haswrapper&&!n.ispage){if('none'==n.win.css('display'))return n.visibility&&n.hideRail().hideRailHr(),!1;!n.hidden&&!n.visibility&&n.showRail().showRailHr()};var t=n.page.maxh,r=n.page.maxw,i=n.view.w;n.view={w:n.ispage?n.win.width():parseInt(n.win[0].clientWidth),h:n.ispage?n.win.height():parseInt(n.win[0].clientHeight)};n.page=o?o:n.getContentSize();n.page.maxh=Math.max(0,n.page.h-n.view.h);n.page.maxw=Math.max(0,n.page.w-n.view.w);if(n.page.maxh==t&&n.page.maxw==r&&n.view.w==i){if(n.ispage)return n;t=n.win.offset();if(n.lastposition&&(r=n.lastposition,r.top==t.top&&r.left==t.left))return n;n.lastposition=t};0==n.page.maxh?(n.hideRail(),n.scrollvaluemax=0,n.scroll.y=0,n.scrollratio.y=0,n.cursorheight=0,n.setScrollTop(0),n.rail.scrollable=!1):n.rail.scrollable=!0;0==n.page.maxw?(n.hideRailHr(),n.scrollvaluemaxw=0,n.scroll.x=0,n.scrollratio.x=0,n.cursorwidth=0,n.setScrollLeft(0),n.railh.scrollable=!1):n.railh.scrollable=!0;n.locked=0==n.page.maxh&&0==n.page.maxw;if(n.locked)return n.ispage||n.updateScrollBar(n.view),!1;!n.hidden&&!n.visibility?n.showRail().showRailHr():!n.hidden&&!n.railh.visibility&&n.showRailHr();n.istextarea&&(n.win.css('resize')&&'none'!=n.win.css('resize'))&&(n.view.h-=20);n.cursorheight=Math.min(n.view.h,Math.round(n.view.h*(n.view.h/n.page.h)));n.cursorheight=n.opt.cursorfixedheight?n.opt.cursorfixedheight:Math.max(n.opt.cursorminheight,n.cursorheight);n.cursorwidth=Math.min(n.view.w,Math.round(n.view.w*(n.view.w/n.page.w)));n.cursorwidth=n.opt.cursorfixedheight?n.opt.cursorfixedheight:Math.max(n.opt.cursorminheight,n.cursorwidth);n.scrollvaluemax=n.view.h-n.cursorheight-n.cursor.hborder;n.railh&&(n.railh.width=0<n.page.maxh?n.view.w-n.rail.width:n.view.w,n.scrollvaluemaxw=n.railh.width-n.cursorwidth-n.cursorh.wborder);n.checkrtlmode&&n.railh&&(n.checkrtlmode=!1,n.opt.rtlmode&&0==n.scroll.x&&n.setScrollLeft(n.page.maxw));n.ispage||n.updateScrollBar(n.view);n.scrollratio={x:n.page.maxw/n.scrollvaluemaxw,y:n.page.maxh/n.scrollvaluemax};n.getScrollTop()>n.page.maxh?n.doScrollTop(n.page.maxh):(n.scroll.y=Math.round(n.getScrollTop()*(1/n.scrollratio.y)),n.scroll.x=Math.round(n.getScrollLeft()*(1/n.scrollratio.x)),n.cursoractive&&n.noticeCursor());n.scroll.y&&0==n.getScrollTop()&&n.doScrollTo(Math.floor(n.scroll.y*n.scrollratio.y));return n};this.resize=n.onResize;this.lazyResize=function(e){e=isNaN(e)?30:e;n.delayed('resize',n.resize,e);return n};this._bind=function(e,o,t,r){n.events.push({e:e,n:o,f:t,b:r,q:!1});e.addEventListener?e.addEventListener(o,t,r||!1):e.attachEvent?e.attachEvent('on'+o,t):e['on'+o]=t};this.jqbind=function(o,t,r){n.events.push({e:o,n:t,f:r,q:!0});e(o).bind(t,r)};this.bind=function(e,o,t,r){var i='jquery'in e?e[0]:e;'mousewheel'==o?'onwheel'in n.win?n._bind(i,'wheel',t,r||!1):(e='undefined'!=typeof document.onmousewheel?'mousewheel':'DOMMouseScroll',g(i,e,t,r||!1),'DOMMouseScroll'==e&&g(i,'MozMousePixelScroll',t,r||!1)):i.addEventListener?(l.cantouch&&/mouseup|mousedown|mousemove/.test(o)&&n._bind(i,'mousedown'==o?'touchstart':'mouseup'==o?'touchend':'touchmove',function(e){if(e.touches){if(2>e.touches.length){var o=e.touches.length?e.touches[0]:e;o.original=e;t.call(this,o)}}
else e.changedTouches&&(o=e.changedTouches[0],o.original=e,t.call(this,o))},r||!1),n._bind(i,o,t,r||!1),l.cantouch&&'mouseup'==o&&n._bind(i,'touchcancel',t,r||!1)):n._bind(i,o,function(e){if((e=e||window.event||!1)&&e.srcElement)e.target=e.srcElement;'pageY'in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop);return!1===t.call(i,e)||!1===r?n.cancelEvent(e):!0})};this._unbind=function(e,o,t,r){e.removeEventListener?e.removeEventListener(o,t,r):e.detachEvent?e.detachEvent('on'+o,t):e['on'+o]=!1};this.unbindAll=function(){for(var o=0;o<n.events.length;o++){var e=n.events[o];e.q?e.e.unbind(e.n,e.f):n._unbind(e.e,e.n,e.f,e.b)}};this.cancelEvent=function(e){e=e.original?e.original:e?e:window.event||!1;if(!e)return!1;e.preventDefault&&e.preventDefault();e.stopPropagation&&e.stopPropagation();e.preventManipulation&&e.preventManipulation();e.cancelBubble=!0;e.cancel=!0;return e.returnValue=!1};this.stopPropagation=function(e){e=e.original?e.original:e?e:window.event||!1;if(!e)return!1;if(e.stopPropagation)return e.stopPropagation();e.cancelBubble&&(e.cancelBubble=!0);return!1};this.showRail=function(){if(0!=n.page.maxh&&(n.ispage||'none'!=n.win.css('display')))n.visibility=!0,n.rail.visibility=!0,n.rail.css('display','block');return n};this.showRailHr=function(){if(!n.railh)return n;if(0!=n.page.maxw&&(n.ispage||'none'!=n.win.css('display')))n.railh.visibility=!0,n.railh.css('display','block');return n};this.hideRail=function(){n.visibility=!1;n.rail.visibility=!1;n.rail.css('display','none');return n};this.hideRailHr=function(){if(!n.railh)return n;n.railh.visibility=!1;n.railh.css('display','none');return n};this.show=function(){n.hidden=!1;n.locked=!1;return n.showRail().showRailHr()};this.hide=function(){n.hidden=!0;n.locked=!0;return n.hideRail().hideRailHr()};this.toggle=function(){return n.hidden?n.show():n.hide()};this.remove=function(){n.stop();n.cursortimeout&&clearTimeout(n.cursortimeout);n.doZoomOut();n.unbindAll();l.isie9&&n.win[0].detachEvent('onpropertychange',n.onAttributeChange);!1!==n.observer&&n.observer.disconnect();!1!==n.observerremover&&n.observerremover.disconnect();n.events=null;n.cursor&&n.cursor.remove();n.cursorh&&n.cursorh.remove();n.rail&&n.rail.remove();n.railh&&n.railh.remove();n.zoom&&n.zoom.remove();for(var r=0;r<n.saved.css.length;r++){var t=n.saved.css[r];t[0].css(t[1],'undefined'==typeof t[2]?'':t[2])};n.saved=!1;n.me.data('__nicescroll','');var o=e.nicescroll;o.each(function(e){if(this&&this.id===n.id){delete o[e];for(var t=++e;t<o.length;t++,e++)o[e]=o[t];o.length--;o.length&&delete o[o.length]}});for(var i in n)n[i]=null,delete n[i];n=null};this.scrollstart=function(e){this.onscrollstart=e;return n};this.scrollend=function(e){this.onscrollend=e;return n};this.scrollcancel=function(e){this.onscrollcancel=e;return n};this.zoomin=function(e){this.onzoomin=e;return n};this.zoomout=function(e){this.onzoomout=e;return n};this.isScrollable=function(o){o=o.target?o.target:o;if('OPTION'==o.nodeName)return!0;for(;o&&1==o.nodeType&&!/BODY|HTML/.test(o.nodeName);){var t=e(o),t=t.css('overflowY')||t.css('overflowX')||t.css('overflow')||'';if(/scroll|auto/.test(t))return o.clientHeight!=o.scrollHeight;o=o.parentNode?o.parentNode:!1};return!1};this.getViewport=function(o){for(o=o&&o.parentNode?o.parentNode:!1;o&&1==o.nodeType&&!/BODY|HTML/.test(o.nodeName);){var t=e(o);if(/fixed|absolute/.test(t.css('position')))return t;var r=t.css('overflowY')||t.css('overflowX')||t.css('overflow')||'';if(/scroll|auto/.test(r)&&o.clientHeight!=o.scrollHeight||0<t.getNiceScroll().length)return t;o=o.parentNode?o.parentNode:!1};return!1};this.onmousewheel=function(e){if(n.locked)return n.debounced('checkunlock',n.resize,250),!0;if(n.rail.drag)return n.cancelEvent(e);'auto'==n.opt.oneaxismousemode&&0!=e.deltaX&&(n.opt.oneaxismousemode=!1);if(n.opt.oneaxismousemode&&0==e.deltaX&&!n.rail.scrollable)return n.railh&&n.railh.scrollable?n.onmousewheelhr(e):!0;var o=+new Date,t=!1;n.opt.preservenativescrolling&&n.checkarea+600<o&&(n.nativescrollingarea=n.isScrollable(e),t=!0);n.checkarea=o;if(n.nativescrollingarea)return!0;if(e=w(e,!1,t))n.checkarea=0;return e};this.onmousewheelhr=function(e){if(n.locked||!n.railh.scrollable)return!0;if(n.rail.drag)return n.cancelEvent(e);var o=+new Date,t=!1;n.opt.preservenativescrolling&&n.checkarea+600<o&&(n.nativescrollingarea=n.isScrollable(e),t=!0);n.checkarea=o;return n.nativescrollingarea?!0:n.locked?n.cancelEvent(e):w(e,!0,t)};this.stop=function(){n.cancelScroll();n.scrollmon&&n.scrollmon.stop();n.cursorfreezed=!1;n.scroll.y=Math.round(n.getScrollTop()*(1/n.scrollratio.y));n.noticeCursor();return n};this.getTransitionSpeed=function(e){var o=Math.round(10*n.opt.scrollspeed);e=Math.min(o,Math.round(e/20*n.opt.scrollspeed));return 20<e?e:0};n.opt.smoothscroll?n.ishwscroll&&l.hastransition&&n.opt.usetransition?(this.prepareTransition=function(e,o){var t=o?20<e?e:0:n.getTransitionSpeed(e),r=t?l.prefixstyle+'transform '+t+'ms ease-out':'';if(!n.lasttransitionstyle||n.lasttransitionstyle!=r)n.lasttransitionstyle=r,n.doc.css(l.transitionstyle,r);return t},this.doScrollLeft=function(e,o){var t=n.scrollrunning?n.newscrolly:n.getScrollTop();n.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=n.scrollrunning?n.newscrollx:n.getScrollLeft();n.doScrollPos(t,e,o)},this.doScrollPos=function(e,o,t){var r=n.getScrollTop(),i=n.getScrollLeft();(0>(n.newscrolly-r)*(o-r)||0>(n.newscrollx-i)*(e-i))&&n.cancelScroll();!1==n.opt.bouncescroll&&(0>o?o=0:o>n.page.maxh&&(o=n.page.maxh),0>e?e=0:e>n.page.maxw&&(e=n.page.maxw));if(n.scrollrunning&&e==n.newscrollx&&o==n.newscrolly)return!1;n.newscrolly=o;n.newscrollx=e;n.newscrollspeed=t||!1;if(n.timer)return!1;n.timer=setTimeout(function(){var r=n.getScrollTop(),i=n.getScrollLeft(),t,s;t=e-i;s=o-r;t=Math.round(Math.sqrt(Math.pow(t,2)+Math.pow(s,2)));t=n.newscrollspeed&&1<n.newscrollspeed?n.newscrollspeed:n.getTransitionSpeed(t);n.newscrollspeed&&1>=n.newscrollspeed&&(t*=n.newscrollspeed);n.prepareTransition(t,!0);n.timerscroll&&n.timerscroll.tm&&clearInterval(n.timerscroll.tm);0<t&&(!n.scrollrunning&&n.onscrollstart&&n.onscrollstart.call(n,{type:'scrollstart',current:{x:i,y:r},request:{x:e,y:o},end:{x:n.newscrollx,y:n.newscrolly},speed:t}),l.transitionend?n.scrollendtrapped||(n.scrollendtrapped=!0,n.bind(n.doc,l.transitionend,n.onScrollEnd,!1)):(n.scrollendtrapped&&clearTimeout(n.scrollendtrapped),n.scrollendtrapped=setTimeout(n.onScrollEnd,t)),n.timerscroll={bz:new BezierClass(r,n.newscrolly,t,0,0,0.58,1),bh:new BezierClass(i,n.newscrollx,t,0,0,0.58,1)},n.cursorfreezed||(n.timerscroll.tm=setInterval(function(){n.showCursor(n.getScrollTop(),n.getScrollLeft())},60)));n.synched('doScroll-set',function(){n.timer=0;n.scrollendtrapped&&(n.scrollrunning=!0);n.setScrollTop(n.newscrolly);n.setScrollLeft(n.newscrollx);if(!n.scrollendtrapped)n.onScrollEnd()})},50)},this.cancelScroll=function(){if(!n.scrollendtrapped)return!0;var e=n.getScrollTop(),o=n.getScrollLeft();n.scrollrunning=!1;l.transitionend||clearTimeout(l.transitionend);n.scrollendtrapped=!1;n._unbind(n.doc,l.transitionend,n.onScrollEnd);n.prepareTransition(0);n.setScrollTop(e);n.railh&&n.setScrollLeft(o);n.timerscroll&&n.timerscroll.tm&&clearInterval(n.timerscroll.tm);n.timerscroll=!1;n.cursorfreezed=!1;n.showCursor(e,o);return n},this.onScrollEnd=function(){n.scrollendtrapped&&n._unbind(n.doc,l.transitionend,n.onScrollEnd);n.scrollendtrapped=!1;n.prepareTransition(0);n.timerscroll&&n.timerscroll.tm&&clearInterval(n.timerscroll.tm);n.timerscroll=!1;var e=n.getScrollTop(),o=n.getScrollLeft();n.setScrollTop(e);n.railh&&n.setScrollLeft(o);n.noticeCursor(!1,e,o);n.cursorfreezed=!1;0>e?e=0:e>n.page.maxh&&(e=n.page.maxh);0>o?o=0:o>n.page.maxw&&(o=n.page.maxw);if(e!=n.newscrolly||o!=n.newscrollx)return n.doScrollPos(o,e,n.opt.snapbackspeed);n.onscrollend&&n.scrollrunning&&n.onscrollend.call(n,{type:'scrollend',current:{x:o,y:e},end:{x:n.newscrollx,y:n.newscrolly}});n.scrollrunning=!1}):(this.doScrollLeft=function(e,o){var t=n.scrollrunning?n.newscrolly:n.getScrollTop();n.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=n.scrollrunning?n.newscrollx:n.getScrollLeft();n.doScrollPos(t,e,o)},this.doScrollPos=function(e,r,i){function u(){if(n.cancelAnimationFrame)return!0;n.scrollrunning=!0;if(h=1-h)return n.timer=o(u)||1;var i=0,t=sy=n.getScrollTop();if(n.dst.ay){var t=n.bzscroll?n.dst.py+n.bzscroll.getNow()*n.dst.ay:n.newscrolly,r=t-sy;if(0>r&&t<n.newscrolly||0<r&&t>n.newscrolly)t=n.newscrolly;n.setScrollTop(t);t==n.newscrolly&&(i=1)}
else i=1;var e=sx=n.getScrollLeft();if(n.dst.ax){e=n.bzscroll?n.dst.px+n.bzscroll.getNow()*n.dst.ax:n.newscrollx;r=e-sx;if(0>r&&e<n.newscrollx||0<r&&e>n.newscrollx)e=n.newscrollx;n.setScrollLeft(e);e==n.newscrollx&&(i+=1)}
else i+=1;2==i?(n.timer=0,n.cursorfreezed=!1,n.bzscroll=!1,n.scrollrunning=!1,0>t?t=0:t>n.page.maxh&&(t=n.page.maxh),0>e?e=0:e>n.page.maxw&&(e=n.page.maxw),e!=n.newscrollx||t!=n.newscrolly?n.doScrollPos(e,t):n.onscrollend&&n.onscrollend.call(n,{type:'scrollend',current:{x:sx,y:sy},end:{x:n.newscrollx,y:n.newscrolly}})):n.timer=o(u)||1};r='undefined'==typeof r||!1===r?n.getScrollTop(!0):r;if(n.timer&&n.newscrolly==r&&n.newscrollx==e)return!0;n.timer&&t(n.timer);n.timer=0;var l=n.getScrollTop(),a=n.getScrollLeft();(0>(n.newscrolly-l)*(r-l)||0>(n.newscrollx-a)*(e-a))&&n.cancelScroll();n.newscrolly=r;n.newscrollx=e;if(!n.bouncescroll||!n.rail.visibility)0>n.newscrolly?n.newscrolly=0:n.newscrolly>n.page.maxh&&(n.newscrolly=n.page.maxh);if(!n.bouncescroll||!n.railh.visibility)0>n.newscrollx?n.newscrollx=0:n.newscrollx>n.page.maxw&&(n.newscrollx=n.page.maxw);n.dst={};n.dst.x=e-a;n.dst.y=r-l;n.dst.px=a;n.dst.py=l;var s=Math.round(Math.sqrt(Math.pow(n.dst.x,2)+Math.pow(n.dst.y,2)));n.dst.ax=n.dst.x/s;n.dst.ay=n.dst.y/s;var d=0,c=s;0==n.dst.x?(d=l,c=r,n.dst.ay=1,n.dst.py=0):0==n.dst.y&&(d=a,c=e,n.dst.ax=1,n.dst.px=0);s=n.getTransitionSpeed(s);i&&1>=i&&(s*=i);n.bzscroll=0<s?n.bzscroll?n.bzscroll.update(c,s):new BezierClass(d,c,s,0,1,0,1):!1;if(!n.timer){(l==n.page.maxh&&r>=n.page.maxh||a==n.page.maxw&&e>=n.page.maxw)&&n.checkContentSize();var h=1;n.cancelAnimationFrame=!1;n.timer=1;n.onscrollstart&&!n.scrollrunning&&n.onscrollstart.call(n,{type:'scrollstart',current:{x:a,y:l},request:{x:e,y:r},end:{x:n.newscrollx,y:n.newscrolly},speed:s});u();(l==n.page.maxh&&r>=l||a==n.page.maxw&&e>=a)&&n.checkContentSize();n.noticeCursor()}},this.cancelScroll=function(){n.timer&&t(n.timer);n.timer=0;n.bzscroll=!1;n.scrollrunning=!1;return n}):(this.doScrollLeft=function(e,o){var t=n.getScrollTop();n.doScrollPos(e,t,o)},this.doScrollTop=function(e,o){var t=n.getScrollLeft();n.doScrollPos(t,e,o)},this.doScrollPos=function(e,o,t){var i=e>n.page.maxw?n.page.maxw:e;0>i&&(i=0);var r=o>n.page.maxh?n.page.maxh:o;0>r&&(r=0);n.synched('scroll',function(){n.setScrollTop(r);n.setScrollLeft(i)})},this.cancelScroll=function(){});this.doScrollBy=function(e,o){var t=0,t=o?Math.floor((n.scroll.y-e)*n.scrollratio.y):(n.timer?n.newscrolly:n.getScrollTop(!0))-e;if(n.bouncescroll){var r=Math.round(n.view.h/2);t<-r?t=-r:t>n.page.maxh+r&&(t=n.page.maxh+r)};n.cursorfreezed=!1;py=n.getScrollTop(!0);if(0>t&&0>=py)return n.noticeCursor();if(t>n.page.maxh&&py>=n.page.maxh)return n.checkContentSize(),n.noticeCursor();n.doScrollTop(t)};this.doScrollLeftBy=function(e,o){var t=0,t=o?Math.floor((n.scroll.x-e)*n.scrollratio.x):(n.timer?n.newscrollx:n.getScrollLeft(!0))-e;if(n.bouncescroll){var r=Math.round(n.view.w/2);t<-r?t=-r:t>n.page.maxw+r&&(t=n.page.maxw+r)};n.cursorfreezed=!1;px=n.getScrollLeft(!0);if(0>t&&0>=px||t>n.page.maxw&&px>=n.page.maxw)return n.noticeCursor();n.doScrollLeft(t)};this.doScrollTo=function(e,o){o&&Math.round(e*n.scrollratio.y);n.cursorfreezed=!1;n.doScrollTop(e)};this.checkContentSize=function(){var e=n.getContentSize();(e.h!=n.page.h||e.w!=n.page.w)&&n.resize(!1,e)};n.onscroll=function(e){n.rail.drag||n.cursorfreezed||n.synched('scroll',function(){n.scroll.y=Math.round(n.getScrollTop()*(1/n.scrollratio.y));n.railh&&(n.scroll.x=Math.round(n.getScrollLeft()*(1/n.scrollratio.x)));n.noticeCursor()})};n.bind(n.docscroll,'scroll',n.onscroll);this.doZoomIn=function(o){if(!n.zoomactive){n.zoomactive=!0;n.zoomrestore={style:{}};var t='position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight'.split(' '),s=n.win[0].style,a;for(a in t){var i=t[a];n.zoomrestore.style[i]='undefined'!=typeof s[i]?s[i]:''};n.zoomrestore.style.width=n.win.css('width');n.zoomrestore.style.height=n.win.css('height');n.zoomrestore.padding={w:n.win.outerWidth()-n.win.width(),h:n.win.outerHeight()-n.win.height()};l.isios4&&(n.zoomrestore.scrollTop=e(window).scrollTop(),e(window).scrollTop(0));n.win.css({position:l.isios4?'absolute':'fixed',top:0,left:0,'z-index':r+100,margin:'0px'});t=n.win.css('backgroundColor');(''==t||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(t))&&n.win.css('backgroundColor','#fff');n.rail.css({'z-index':r+101});n.zoom.css({'z-index':r+102});n.zoom.css('backgroundPosition','0px -18px');n.resizeZoom();n.onzoomin&&n.onzoomin.call(n);return n.cancelEvent(o)}};this.doZoomOut=function(o){if(n.zoomactive)return n.zoomactive=!1,n.win.css('margin',''),n.win.css(n.zoomrestore.style),l.isios4&&e(window).scrollTop(n.zoomrestore.scrollTop),n.rail.css({'z-index':n.zindex}),n.zoom.css({'z-index':n.zindex}),n.zoomrestore=!1,n.zoom.css('backgroundPosition','0px 0px'),n.onResize(),n.onzoomout&&n.onzoomout.call(n),n.cancelEvent(o)};this.doZoom=function(e){return n.zoomactive?n.doZoomOut(e):n.doZoomIn(e)};this.resizeZoom=function(){if(n.zoomactive){var o=n.getScrollTop();n.win.css({width:e(window).width()-n.zoomrestore.padding.w+'px',height:e(window).height()-n.zoomrestore.padding.h+'px'});n.onResize();n.setScrollTop(Math.min(n.page.maxh,o))}};this.init();e.nicescroll.push(this)},p=function(e){var o=this;this.nc=e;this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0;this.snapy=this.snapx=!1;this.demuly=this.demulx=0;this.lastscrolly=this.lastscrollx=-1;this.timer=this.chky=this.chkx=0;this.time=function(){return+new Date};this.reset=function(e,t){o.stop();var r=o.time();o.steptime=0;o.lasttime=r;o.speedx=0;o.speedy=0;o.lastx=e;o.lasty=t;o.lastscrollx=-1;o.lastscrolly=-1};this.update=function(e,t){var r=o.time();o.steptime=r-o.lasttime;o.lasttime=r;var r=t-o.lasty,s=e-o.lastx,i=o.nc.getScrollTop(),n=o.nc.getScrollLeft(),i=i+r,n=n+s;o.snapx=0>n||n>o.nc.page.maxw;o.snapy=0>i||i>o.nc.page.maxh;o.speedx=s;o.speedy=r;o.lastx=e;o.lasty=t};this.stop=function(){o.nc.unsynched('domomentum2d');o.timer&&clearTimeout(o.timer);o.timer=0;o.lastscrollx=-1;o.lastscrolly=-1};this.doSnapy=function(e,t){var r=!1;0>t?(t=0,r=!0):t>o.nc.page.maxh&&(t=o.nc.page.maxh,r=!0);0>e?(e=0,r=!0):e>o.nc.page.maxw&&(e=o.nc.page.maxw,r=!0);r&&o.nc.doScrollPos(e,t,o.nc.opt.snapbackspeed)};this.doMomentum=function(e){var a=o.time(),i=e?a+e:o.lasttime;e=o.nc.getScrollLeft();var d=o.nc.getScrollTop(),s=o.nc.page.maxh,l=o.nc.page.maxw;o.speedx=0<l?Math.min(60,o.speedx):0;o.speedy=0<s?Math.min(60,o.speedy):0;i=i&&60>=a-i;if(0>d||d>s||0>e||e>l)i=!1;e=o.speedx&&i?o.speedx:!1;if(o.speedy&&i&&o.speedy||e){var n=Math.max(16,o.steptime);50<n&&(e=n/50,o.speedx*=e,o.speedy*=e,n=50);o.demulxy=0;o.lastscrollx=o.nc.getScrollLeft();o.chkx=o.lastscrollx;o.lastscrolly=o.nc.getScrollTop();o.chky=o.lastscrolly;var t=o.lastscrollx,r=o.lastscrolly,c=function(){var e=600<o.time()-a?0.04:0.02;if(o.speedx&&(t=Math.floor(o.lastscrollx-o.speedx*(1-o.demulxy)),o.lastscrollx=t,0>t||t>l))e=0.1;if(o.speedy&&(r=Math.floor(o.lastscrolly-o.speedy*(1-o.demulxy)),o.lastscrolly=r,0>r||r>s))e=0.1;o.demulxy=Math.min(1,o.demulxy+e);o.nc.synched('domomentum2d',function(){o.speedx&&(o.nc.getScrollLeft()!=o.chkx&&o.stop(),o.chkx=t,o.nc.setScrollLeft(t));o.speedy&&(o.nc.getScrollTop()!=o.chky&&o.stop(),o.chky=r,o.nc.setScrollTop(r));o.timer||(o.nc.hideCursor(),o.doSnapy(t,r))});1>o.demulxy?o.timer=setTimeout(c,n):(o.stop(),o.nc.hideCursor(),o.doSnapy(t,r))};c()}
else o.doSnapy(o.nc.getScrollLeft(),o.nc.getScrollTop())}},n=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(o,t,r){return(t=e.data(o,'__nicescroll')||!1)&&t.ishwscroll?t.getScrollTop():n.call(o)},set:function(o,t){var r=e.data(o,'__nicescroll')||!1;r&&r.ishwscroll?r.setScrollTop(parseInt(t)):n.call(o,t);return this}};e.fn.scrollTop=function(o){if('undefined'==typeof o){var t=this[0]?e.data(this[0],'__nicescroll')||!1:!1;return t&&t.ishwscroll?t.getScrollTop():n.call(this)};return this.each(function(){var t=e.data(this,'__nicescroll')||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(o)):n.call(e(this),o)})};var s=e.fn.scrollLeft;e.cssHooks.pageXOffset={get:function(o,t,r){return(t=e.data(o,'__nicescroll')||!1)&&t.ishwscroll?t.getScrollLeft():s.call(o)},set:function(o,t){var r=e.data(o,'__nicescroll')||!1;r&&r.ishwscroll?r.setScrollLeft(parseInt(t)):s.call(o,t);return this}};e.fn.scrollLeft=function(o){if('undefined'==typeof o){var t=this[0]?e.data(this[0],'__nicescroll')||!1:!1;return t&&t.ishwscroll?t.getScrollLeft():s.call(this)};return this.each(function(){var t=e.data(this,'__nicescroll')||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(o)):s.call(e(this),o)})};var l=function(o){var t=this;this.length=0;this.name='nicescrollarray';this.each=function(e){for(var o=0,r=0;o<t.length;o++)e.call(t[o],r++);return t};this.push=function(e){t[t.length]=e;t.length++};this.eq=function(e){return t[e]};if(o)for(a=0;a<o.length;a++){var r=e.data(o[a],'__nicescroll')||!1;r&&(this[this.length]=r,this.length++)};return this};(function(e,o,t){for(var r=0;r<o.length;r++)t(e,o[r])})(l.prototype,'show hide toggle onResize resize remove stop doScrollPos'.split(' '),function(e,o){e[o]=function(){var e=arguments;return this.each(function(){this[o].apply(this,e)})}});e.fn.getNiceScroll=function(o){return'undefined'==typeof o?new l(this):this[o]&&e.data(this[o],'__nicescroll')||!1};e.extend(e.expr[':'],{nicescroll:function(o){return e.data(o,'__nicescroll')?!0:!1}});e.fn.niceScroll=function(o,t){'undefined'==typeof t&&('object'==typeof o&&!('jquery'in o))&&(t=o,o=!1);var r=new l;'undefined'==typeof t&&(t={});o&&(t.doc=e(o),t.win=e(this));var i=!('doc'in t);!i&&!('win'in t)&&(t.win=e(this));this.each(function(){var o=e(this).data('__nicescroll')||!1;o||(t.doc=i?e(this):t.doc,o=new g(t,e(this)),e(this).data('__nicescroll',o));r.push(o)});return 1==r.length?r[0]:r};window.NiceScroll={getjQuery:function(){return e}};e.nicescroll||(e.nicescroll=new l,e.nicescroll.options=m)})(jQuery);