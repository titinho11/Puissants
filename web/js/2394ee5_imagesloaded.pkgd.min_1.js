/*!
 * imagesLoaded PACKAGED v4.1.1
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){'function'==typeof define&&define.amd?define('ev-emitter/ev-emitter',t):'object'==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}('undefined'!=typeof window?window:this,function(){function t(){};var e=t.prototype;return e.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},e.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},e.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var r=0,i=n[r];t=t||[];for(var o=this._onceEvents&&this._onceEvents[e];i;){var s=o&&o[i];s&&(this.off(e,i),delete o[i]),i.apply(this,t),r+=s?0:1,i=n[r]};return this}},t}),function(e,t){'use strict';'function'==typeof define&&define.amd?define(['ev-emitter/ev-emitter'],function(i){return t(e,i)}):'object'==typeof module&&module.exports?module.exports=t(e,require('ev-emitter')):e.imagesLoaded=t(e,e.EvEmitter)}(window,function(e,t){function h(e,t){for(var i in t)e[i]=t[i];return e};function d(e){var t=[];if(Array.isArray(e))t=e;else if('number'==typeof e.length)for(var i=0;i<e.length;i++)t.push(e[i]);else t.push(e);return t};function i(e,t,n){return this instanceof i?('string'==typeof e&&(e=document.querySelectorAll(e)),this.elements=d(e),this.options=h({},this.options),'function'==typeof t?n=t:h(this.options,t),n&&this.on('always',n),this.getImages(),o&&(this.jqDeferred=new o.Deferred),void setTimeout(function(){this.check()}.bind(this))):new i(e,t,n)};function n(e){this.img=e};function r(e,t){this.url=e,this.element=t,this.img=new Image};var o=e.jQuery,s=e.console;i.prototype=Object.create(t.prototype),i.prototype.options={},i.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},i.prototype.addElementImages=function(e){'IMG'==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var o=e.nodeType;if(o&&a[o]){for(var n=e.querySelectorAll('img'),t=0;t<n.length;t++){var s=n[t];this.addImage(s)};if('string'==typeof this.options.background){var i=e.querySelectorAll(this.options.background);for(t=0;t<i.length;t++){var r=i[t];this.addElementBackgroundImages(r)}}}};var a={1:!0,9:!0,11:!0};return i.prototype.addElementBackgroundImages=function(e){var i=getComputedStyle(e);if(i)for(var o=/url\((['"])?(.*?)\1\)/gi,t=o.exec(i.backgroundImage);null!==t;){var n=t&&t[2];n&&this.addBackground(n,e),t=o.exec(i.backgroundImage)}},i.prototype.addImage=function(e){var t=new n(e);this.images.push(t)},i.prototype.addBackground=function(e,t){var i=new r(e,t);this.images.push(i)},i.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})};var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once('progress',t),e.check()}):void this.complete()},i.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent('progress',[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&s&&s.log('progress: '+i,e,t)},i.prototype.complete=function(){var t=this.hasAnyBroken?'fail':'done';if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent('always',[this]),this.jqDeferred){var e=this.hasAnyBroken?'reject':'resolve';this.jqDeferred[e](this)}},n.prototype=Object.create(t.prototype),n.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,'naturalWidth'):(this.proxyImage=new Image,this.proxyImage.addEventListener('load',this),this.proxyImage.addEventListener('error',this),this.img.addEventListener('load',this),this.img.addEventListener('error',this),void(this.proxyImage.src=this.img.src))},n.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent('progress',[this,this.img,t])},n.prototype.handleEvent=function(e){var t='on'+e.type;this[t]&&this[t](e)},n.prototype.onload=function(){this.confirm(!0,'onload'),this.unbindEvents()},n.prototype.onerror=function(){this.confirm(!1,'onerror'),this.unbindEvents()},n.prototype.unbindEvents=function(){this.proxyImage.removeEventListener('load',this),this.proxyImage.removeEventListener('error',this),this.img.removeEventListener('load',this),this.img.removeEventListener('error',this)},r.prototype=Object.create(n.prototype),r.prototype.check=function(){this.img.addEventListener('load',this),this.img.addEventListener('error',this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,'naturalWidth'),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener('load',this),this.img.removeEventListener('error',this)},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent('progress',[this,this.element,t])},i.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(o=t,o.fn.imagesLoaded=function(e,t){var n=new i(this,e,t);return n.jqDeferred.promise(o(this))})},i.makeJQueryPlugin(),i});